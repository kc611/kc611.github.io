<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Google Summer of Code 2021 - Week #3 and #4.</title>
  <link rel="stylesheet" href="../../blog_css/tailwind_classic.css" />
  <link rel="stylesheet" href="../../blog_css/blog_styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>
  <div class="scroll-up-btn">
    <i class="fas fa-angle-up"></i>
  </div>
  <nav class="navbar">
    <div class="max-width">
      <div class="logo"><a href="../../blog.html">Blog.</a></div>
      <ul class="menu">
        <li><a href="../../index.html" class="menu-btn">Home</a></li>
        <li>
          <a href="https://drive.google.com/file/d/1pmijV86jIG2T6yemjeIEkXLcJ-RgG6Gr/view?usp=sharing"
            class="menu-btn">Resume</a>
        </li>
        <li>
          <a href="../../index.html#contact" class="menu-btn">Contact Me</a>
        </li>
      </ul>
      <div class="menu-btn">
        <i class="fas fa-bars"></i>
      </div>
    </div>
  </nav>

  <!-- home section start -->
  <div class="h-screen z-0">
    <div class="w-full h-2/5 bg-black">
      <div class="w-full h-2/5"></div>
      <div class="w-full text-center text-white p-4 text-4xl">
        Google Summer of Code 2021 - Week #3 and #4.
      </div>
      <div class="text-center text-white">
        <i class="fa fa-calendar" aria-hidden="true"></i> 5th July, 2021 |
        <i class="fa fa-clock" aria-hidden="true"></i> 5 min read
      </div>
    </div>
  </div>

  <div class="h-screen w-full absolute top-0 left-0 z-10">
    <div class="h-max bg-white mx-96 mt-72 mb-20 card rounded-3xl shadow-lg">
      <div class="h-full w-full p-20">
        <div class="w-full px-20 flex items-center">
          <img src="./../../blog_img/vertical-gsoc-logo-200.jpg" alt="" srcset="" class="ml-24" />
          <img src="./../../blog_img/pymc-logo.png" alt="" srcset="" class="h-4/5" />
        </div>

        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> Hey there!
        </div>
        <div class="text-2xl px-20 py-4">
          <p class="py-4">
            Hey there, hope ya'll are safe and doing well. I'm back with some
            updates about my project. In case you haven't already, have a look
            at my
            <a href="./gsoc-selection.html" class="bloglink">GSoC Project</a>
            and see what this fuss is all about. So here goes.
          </p>
        </div>

        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> So what did I do?
        </div>
        <div class="text-2xl px-20 py-4">
          <p class="py-4">
            During these two weeks, I worked on completing the refactor of the
            remaining multivariate distributions. Some of them turned out to
            be pretty challenging. But as we expected, the shift from
            <i class="code">Distribution</i> to a
            <i class="code">RandomVariable</i> based logic makes the code a
            whole lot simpler when to comes to shape handing logic. This was
            especially highlighted in refactoring the
            <i class="code">KroneckerNormal</i> distribution in
            <a href="https://github.com/pymc-devs/pymc3/pull/4774" class="bloglink">#4774</a>, where we were able to
            remove a whole lot of shape handling and
            boilerplate code and simplify the overall design. The only
            multivariate distributions which remain are
            <i class="code">LKJCholeskyCov</i>, (well that and
            <i class="code">LKJCorr</i> but <i class="code">LKJCorr</i> is
            finished and in the same PR). The work remaining over there is
            probably just a bit of shape-checking logic using the
            <i class="code">ndim_supp</i> and
            <i class="code">ndim_params</i> properties of random variables.
            For those who don't know about these, they are basically class
            variables that determine or are rather used as sanity checks for the
            output dimensions and input arguments dimensions respectively. For
            a more brief explaination about them, you can check out this
            comment by
            <a href="https://github.com/brandonwillard" class="bloglink">@brandonwillard</a>
            :
            <a href="https://github.com/pymc-devs/pymc3/pull/4777#discussion_r654832110"
              class="bloglink">4777#comment</a>
          </p>
          <br />
          <p>
            That aside we also started with the <i class="code">Bound</i> distribution over here
            in <a href="https://github.com/pymc-devs/pymc3/pull/4815" class="bloglink">#4815</a>, and it's going all
            well and good. But will probably need
            a bit more (and proper) testing and troubleshooting before it's
            ready.
          </p>
        </div>
        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> Summary of what I did:
        </div>
        <div class="text-2xl px-20 py-4">
          My work during these two weeks is basically:
          <ul style="padding-left: 50px;">
            <li>
              <p class="py-4">
                - <i class="code">Wishart</i> and <i class="code">MatrixNormal</i> distribution (<a
                  href="https://github.com/pymc-devs/pymc3/pull/4777" class="bloglink">#4777</a>): Completed the
                refactoring work and got it merged.
              </p>
            </li>
            <li>
              <p class="py-4">
                - <i class="code">LKJCorr</i> and <i class="code">LKJCholeskyCov</i> (<a
                  href="https://github.com/pymc-devs/pymc3/pull/4784" class="bloglink">#4784</a>):
                Needs resolving the <i class="code">ndim_supp</i> issue and more tests for <i
                  class="code">LKJCholeskyCov</i>.

              </p>
            </li>
            <li>
              <p class="py-4">
                - <i class="code">KroneckerNormal</i> distribution (<a
                  href="https://github.com/pymc-devs/pymc3/pull/4774" class="bloglink">#4774</a>):
                Completed the refactoring work and got it merged.
              </p>
            </li>
            <li>
              <p class="py-4">
                - <i class="code">Bound</i> distribution (<a href="https://github.com/pymc-devs/pymc3/pull/4815"
                  class="bloglink">#4815</a>):
                Underway, needs more testing and troubleshooting.
              </p>
            </li>
          </ul>
        </div>
        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> Anything Interesting ?
        </div>
        <div class="text-2xl px-20 py-4">
          <p class="py-4">
            This time I'll be working on one of the most important distributions (which as it turns out is also the one
            with the most complications) i.e. the <i class="code">Mixture</i> distribution. A little about <i
              class="code">Mixture</i> distribution: It allows
            us to 'mix' different distribution RVs together in such a way that we can sample from each one of them based
            upon probability weights provided to it as arguments. A simple and straightforward explanation would be
            like, for instance, if we give it two distributions a <i class="code">Normal</i> and a <i
              class="code">Uniform</i> distribution, and probability
            weights of 0.8 and 0.2 respectively the probability that <i class="code">Mixture</i> will sample from the <i
              class="code">Normal</i> distribution is
            4 times more likely than it is to sample from the <i class="code">Uniform</i> one. And previously <i
              class="code">Mixture</i> was pretty much
            unrestricted to what kind of distributions were involved in such 'mixing'. This led to a whole lot of issues
            surrounding <i class="code">Mixture</i> such as <a href="https://github.com/pymc-devs/pymc3/issues/3582"
              class="bloglink">#3582</a> and
            <a href="https://github.com/pymc-devs/pymc3/issues/4511" class="bloglink">#4511</a>. It also has a lot of
            cryptic shape handling which led to
            many size-related issues. <a href="https://github.com/pymc-devs/pymc3/issues/2614"
              class="bloglink">#2614</a>,
            <a href="https://github.com/pymc-devs/pymc3/issues/3994" class="bloglink">#3994</a> are some of them and
            consequently, we finally concluded that
            shape handling is hard not just in PyMC3,<a
              href="https://github.com/pymc-devs/pymc3/issues/3101#issuecomment-405588969" class="bloglink">but in
              life</a>. &#128527;

          </p>
          <p class="py-4">
            So for the <i class="code">Mixture</i> distribution, we could have gone the standard planned way of
            refactoring like the rest of
            the distributions, but it turns out folks at Aesara have developed a great alternative to the standard
            <i class="code">Mixture</i> logic in the <i class="code">aeppl</i> library. <i class="code">aeppl</i> is a
            small but impressive library which
            provides PPL tools
            which are explained in detail on its Github landing page here. One of its abilities is converting Aesara
            graphs with RVs into joint log-probability graphs. And with <a
              href="https://github.com/aesara-devs/aeppl/pull/19" class="bloglink">aeppl#19</a>
            this functionality is brought very close to how Mixtures work in PyMC but with more flexibility and uses. So
            consequently it has been decided to bring in <i class="code">aeppl</i> into PyMC so that we can use these
            joint
            log-probability graphs as a replacement to the <i class="code">Mixture</i> Distribution.
          </p>
        </div>
        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> And what about the time series stuff that you were going to refactor?
        </div>
        <div class="text-2xl px-20 py-4">
          <p class="py-4">
            Yes, yes coming to that. So it turns out we're cooking up something at <i class="code">aeppl</i> which will
            give us much more
            than the predefined time-series as in v3. We are implementing a general log probability calculation for
            near-arbitrary RV combinations using Scan. Sounds cool right, it is. Check out this issue page here <a
              href="https://github.com/aesara-devs/aeppl/issues/23" class="bloglink">aeppl#23</a> which
            also has an example and a brief explanation about its inner workings. I am also working on a PR <a
              href="https://github.com/aesara-devs/aeppl/pull/24" class="bloglink">aeppl#24</a> that
            implements (at least a basic version) of this functionality.

          </p>
        </div>
        <div class="text-3xl font-bold">
          <i class="text-blue-500">#</i> So What's next ?
        </div>
        <div class="text-2xl px-20 py-4">
          <p class="py-4">
            This week I plan on:
          <ul style="padding-left: 50px;">
            <li>
              <p class="py-4">
                - <i class="code">LKJCorr</i> and <i class="code">LKJCholeskyCov</i> (<a
                  href="https://github.com/pymc-devs/pymc3/pull/4784" class="bloglink">#4784</a>):
                Resolving the issue and completing this PR.

              </p>
            </li>
            <li>
              <p class="py-4">
                - <i class="code">Bound</i> distribution (<a href="https://github.com/pymc-devs/pymc3/pull/4815"
                  class="bloglink">#4815</a>):
                Adding tests and completing the refactoring.
              </p>
            </li>
            <li>
              <p class="py-4">
                - Start <i class="code">aeppl</i> integration with PyMC:
                This will be started once <a href="https://github.com/aesara-devs/aeppl/pull/19"
                  class="bloglink">aeppl#19</a> is merged. And the primary work will be bringing in the join log
                probablity graphs as an replacement to <i class="code">Mixture</i> distribution.
              </p>
            </li>
            <li>
              <p class="py-4">
                - Add support for Scan Ops in <i class="code">aeppl</i> (<a
                  href="https://github.com/aesara-devs/aeppl/pull/24" class="bloglink">aeppl#24</a>):
                Continue and hopefully finish this work.
              </p>
            </li>
          </ul>

          </p>
        </div>
        <!-- <div class="max-width-1 m-auto"><hr /></div>
          <div class="home-articles max-width-1 m-auto font2">
            <h2>People who read this also read</h2>
            <div class="row">
              <div class="home-article more-post">
                <div class="home-article-img">
                  <img src="../../blog_img/11.svg" alt="article" />
                </div>
                <div class="home-article-content py-4 center">
                  <a href="./gsoc-selection.html"
                    ><h3>Google Summer of Code - Selection</h3></a
                  >
    
                  <div>Author Name: Kaustubh Chaudhari</div>
                  <span>29th May | 6 min read</span>
                </div>
              </div>
              <div class="home-article more-post">
                <div class="home-article-img">
                  <img src="../../blog_img/11.svg" alt="article" />
                </div>
                <div class="home-article-content py-4 center">
                  <a href="./gsoc-week-2.html"
                    ><h3>Google Summer of Code - Week #2</h3></a
                  >
    
                  <div>Author Name: Kaustubh Chaudhari</div>
                  <span>20th June | 6 min read</span>
                </div>
              </div> -->
      </div>
    </div>

    <footer>
      <span>Created By Kaustubh Chaudhari |
        <span class="far fa-copyright"></span> 2020 All rights reserved.</span>
    </footer>
  </div>

  <!-- footer section start -->

  <script src="../../blog_scripts/blog_home.js"></script>
</body>

</html>